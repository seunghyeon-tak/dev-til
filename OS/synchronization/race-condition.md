# ⚠️ Race Condition (경쟁 상태)

📅 작성일: 2025-04-04  
📂 분류: OS / Synchronization  
🔖 태그: #race-condition #경쟁상태 #동기화문제 #스레드충돌 #운영체제

---

## 🔍 요약

Race Condition(경쟁 상태)은 
여러 스레드나 프로세스가 **동시에 같은 자원에 접근해서 예기치 않은 결과가 나오는 상황**이다.

---

## 🎯 쉽게 설명하면

- 두명이 동시에 **같은 문서 수정**하면 충돌나는 것처럼
- **동시에 실행되는 스레드가 같은 변수나 자원을 변경하려고 할 때 문제가 생김**

---

## 💥 예시 상황

### 예: 은행 계좌에서 출금하는 코드

```java
if (balance >= 10000) {
    balance -= 10000;
}
```

- 두 스레드가 동시에 위 조건을 만족하고 실행한다면?
    - 둘다 balance가 10000이상이라고 판단하고 출금
    - 실제로는 20000이 빠짐 -> **잘못된 결과**

---

## 🧠 왜 발생할까?

- 멀티스레딩 환경에서 스레드들은 CPU 시간을 나눠 씀
- 코드 실행 순서가 매번 달라질 수 있음
- 동시에 변수에 접근하면 순서가 꼬일 수 있음

-> 이런 상황을 **비동기적 충돌**이라고함

---

## ✅ 방지 방법

- **임계영역(Critical Section)** 설정
- **락(Lock), 뮤텍스(Mutex), 세마포어(Semaphore)** 같은 동기화 기법 사용
- 자원에 접근할 때 **한번에 하나만 접근**하도록 제한

---

## 📦 정리 요약

|  항목 |	내용  |
|------|--------|
|정의	| 여러 스레드가 같은 자원에 동시에 접근해 잘못된 결과가 나오는 현상|
|왜 위험한가? |	데이터 무결성 파괴, 예기치 않은 버그 발생|
|방지 방법 |	락, 뮤텍스, 임계 영역 설정 등 동기화 처리|
|실무 예시 |	은행 앱 출금, 쇼핑몰 재고 수량 처리, 게시글 좋아요 수 증가 등|