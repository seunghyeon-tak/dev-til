# 🔐 Mutex vs Semaphore

📅 작성일: 2025-04-04  
📂 분류: OS / Synchronization  
🔖 태그: #mutex #semaphore #동기화 #임계영역 #운영체제 #lock

---

## 🔍 요약

**Mutex(뮤텍스)**와 **Semaphore(세마포어)**는

둘 다 여러 스레드가 **동시에 자원에 접근하지 않도록 막는 도구** 이다.

- 공통점 : 자원 보호를 위해 락을 걸고 푸는 도구
- 차이점 : 자원 수, 소유권, 사용 방식 등이 다름

---

## ✅ 핵심 차이 비교

| 항목             | Mutex                            | Semaphore                           |
|------------------|----------------------------------|--------------------------------------|
| 자원 개수        | 하나만 보호 가능 (1개)            | 여러 개도 가능 (N개)                |
| 소유권           | 있음 (잠금 건 스레드만 해제 가능) | 없음 (누구든 해제 가능)             |
| 사용 목적        | 상호 배제를 위해                 | 자원 수를 제어하기 위해             |
| 동작 방식        | lock / unlock                     | wait(P) / signal(V)                  |
| 구현 난이도      | 상대적으로 단순                   | 더 복잡                              |
| 예시             | 공유 변수 하나 보호               | 최대 3명만 입장 가능한 제한 구역    |

---

## ✨ 예시로 쉽게 이해하기

### 🧷 Mutex: “화장실 열쇠 1개”

- 열쇠 사진 사람만 들어갈 수 있음
- 열쇠를 가져간 사람이 **직접 반납**해야 다음 사람이 들어올 수 있음

### 🚦 Semaphore: “엘리베이터 인원 제한”

- 최대 3명까지 탑승 가능
- 들어갈 때 인원 수 줄이고(signal), 나가면 다시 늘림(wait)
- **누가 들어오고 나가는지 상관 없음**

---

## 🧠 실제 사용 예시

| 상황                             | 선택 도구      |
|----------------------------------|----------------|
| 하나의 공유 변수 보호           | Mutex          |
| 최대 5개의 DB 커넥션 풀 관리     | Semaphore      |
| 하나씩 순서대로 작업 수행       | Mutex          |
| 한 번에 여러 개의 요청 제한     | Semaphore      |

---

## ⚠️ 주의할 점

- 잘못 사용하면 **데드락(Deadlock)** 발생할 수 있음
- 세마포어는 여러 자원을 다루는 만큼 **구현이 더 복잡**

---

## 📝 메모

- 뮤텍스는 나만 쓰는것, 세마포어는 N명까지 들어오세요 이런뜻
- 보통 실무에서는 뮤텍스를 주로 쓴다고함 (간단하고 명확해서?)
- 임계영역을 뮤텍스랑 세마포어를 통해 동시 접근이 제어된다 (동기화 기법으로 보호)
