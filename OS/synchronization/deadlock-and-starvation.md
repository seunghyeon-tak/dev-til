# 🚫 데드락(Deadlock) & 기아 상태(Starvation)

📅 작성일: 2025-04-05  
📂 분류: OS / Synchronization  
🔖 태그: #데드락 #기아상태 #락문제 #동기화 #운영체제

---

## 🔍 요약

동기화를 잘못 설계하면 프로그램이 멈추거나,

일부 스레드가 계속 기다리는 문제가 발생할 수 있다.

이런 현상이 **데드락(Deadlock)**과 **기아 상태(Starvation)**이다.

---

## 🚫 데드락(Deadlock)이란?

여러 스레드(or 프로세스)가 서로 가진 자원을 기다리다가, 아무도 앞으로 진행하지 못하는 상태

### 🔁 예시 상황

- 스레드 A는 락1을 잡고 락2를 기다림
- 스레드 B는 락2를 잡고 락1을 기다림

-> 서로 상대방이 락을 놓아주길 기다리기만 하고 **영원히 멈춤**

### 🧠 4가지 발생 조건 (전통적인 데드락 조건)

1. **상호 배제** : 한 번에 하나만 자원 사용가능
2. **점유와 대기** : 자원 가지고 다른 자원 기다림
3. **비선점** : 자원을 강제로 빼앗을 수 없음
4. **순환 대기** : 각 스레드가 다른 스레드가 가진 자원을 기다림

---

## ⛔ 기아 상태(Starvation)란?

어떤 스레드가 계속 락을 얻지 못해서, 자원 사용 기회를 잃는 상태

### 🔁 예시 상황

- 우선순위가 낮은 스레드가 계속 기다리기만 하고
- 우선순위가 높은 스레드들만 락을 계속 가져가면,
- 낮은 스레드는 **계속 대기만 하다가 굶는 상태**

---

## 🔄 차이점 요약

| 항목       | Deadlock (교착 상태)             | Starvation (기아 상태)            |
|------------|-----------------------------------|------------------------------------|
| 상태       | 모두 멈춤                         | 일부만 멈춤                        |
| 원인       | 서로 자원을 주지 않고 대기         | 우선순위나 락 점유 불균형          |
| 해결 방법  | 락 순서 정하기, 타임아웃 등        | 우선순위 조절, 공정한 스케줄링 사용 |

---

## ✅ 방지/해결 방법

- 자원 접근 **순서를 고정**하기
- 일정 시간 안에 락을 못 얻으면 **타임아웃 후 포기**
- 락을 짧게 걸고 빨리 푸는 등 **점유 시간 최소화**
- **공정한 스케줄링** 사용 (우선순위 불균형 방지)

---

## 📝 정리

- 데드락은 서로 양보 안하고 버티는 상황
  기아는 양보만 하다가 기회조차 못잡는 상황
- 락을 쓸땐 항상 내가 잡은 락 + 내가 기다릴 락을 잘 정리하자
