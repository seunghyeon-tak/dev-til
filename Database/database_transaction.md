# 🔄 트랜잭션과 동시성 제어

📅 작성일: 2025-06-03
📂 분류: Database
🔖 태그: #트랜잭션 #COMMIT #ROLLBACK #데드락

---

## 📌 상세 내용

### 1. 트랜잭션이란?

- 논리적으로 하나의 작업 단위
- 여러 SQL 처리를 하나의 덩어리로 묶어, 전부 실행되거나 전부 취소되도록 보장
- `원자성(Atomicity)`, `일관성(Consistency)`, `격리성(Isolation)`, `지속성(Durability)` → ACID 특성
    - 원자성 -> 트랜잭션에 포함된 처리는 모두 실행된다 이거나 모두 실행되지 않는다 중 하나가 된다.
    - 일관성 -> 미리 설정된 조건을 충족하고 데이터의 정합성을 보증한다. (데이터가 서로 어긋나지 않고 앞뒤가 잘 맞도록 유지)
    - 격리성 -> 처리 실행 도중의 상태에서는 다른 처리에 영향을 주지 않는다.
    - 지속성 -> 트랜잭션이 완료되면 그 결과가 손실되는 일은 없다.

### 2. 주요 트랜잭션 명령어

|명령어 |	설명 |
|------|------|
|COMMIT |	현재까지 실행된 트랜잭션을 확정하고 저장|
|ROLLBACK |	현재까지 실행한 트랜잭션을 되돌림, 작업 취소|

- 트랜잭션 시작은 `START TRANSACTION` 또는 DBMS에 따라 자동 시작
- `COMMIT` 전까지는 데이터가 확정되지 않으며, `ROLLBACK`이 가능함

### 3. 데드락 (Deadlock)

- 두 개 이상의 트랜잭션이 서로의 자원을 기다리며 영원히 멈추는 상황
- 예: A는 X를 점유하고 Y를 기다리고, B는 Y를 점유하고 X를 기다리는 상황
- 해결 방법: 락 획득 `순서 통일`, `타임아웃 설정`, `교착 탐지 알고리즘` 등

