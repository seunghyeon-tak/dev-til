# â˜ï¸ AWS S3ë€? & Springì—ì„œì˜ í™œìš©

ğŸ“… ì‘ì„±ì¼: 2025-06-27  
ğŸ“‚ ë¶„ë¥˜: AWS / Storage / Spring Integration  
ğŸ”– íƒœê·¸: #AWS #S3 #SpringBoot #íŒŒì¼ì—…ë¡œë“œ #CloudStorage #MultipartFile

---

## âœ… S3ë€?

> AWSì—ì„œ ì œê³µí•˜ëŠ” ê°ì²´ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤

S3ëŠ” ì´ë¯¸ì§€, ë™ì˜ìƒ, ë¬¸ì„œ íŒŒì¼ ë“± `ì •ì  íŒŒì¼`ì„ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³ , ë¹ ë¥´ê²Œ ì „ì†¡í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤ ì´ë‹¤.
ì‰½ê²Œ ìƒê°í•´ êµ¬ê¸€ ë“œë¼ì´ë¸Œ, iCloud ê°™ì€ ê°œì¸ í´ë¼ìš°ë“œ ì €ì¥ì†Œì˜ ê¸°ì—…/ì„œë¹„ìŠ¤ìš© ë²„ì „ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

---

## âœ… S3ë¥¼ ì™œ ì‚¬ìš©í•˜ëŠ”ê°€?

### ğŸ“Œ 1. ì„œë²„ ì €ì¥ê³µê°„ê³¼ ì—­í•  ë¶„ë¦¬

EC2ì— íŒŒì¼ì„ ì €ì¥í•˜ë©´ ì„œë²„ê°€ ì£½ê±°ë‚˜ êµì²´ë  ë•Œ íŒŒì¼ë„ ê°™ì´ ìœ ì‹¤ë  ìˆ˜ ìˆë‹¤.
S3ëŠ” `ì„œë²„ì™€ ë…ë¦½ì ì¸ ì €ì¥ì†Œë¡œ íŒŒì¼ì„ ì•ˆì „í•˜ê²Œ ë³´ê´€`í•  ìˆ˜ ìˆë‹¤.

### ğŸ“Œ 2. ë¬´í•œì— ê°€ê¹Œìš´ í™•ì¥ì„±

ìˆ˜ì²œ, ìˆ˜ë§Œê°œì˜ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ë”ë¼ë„ **ìë™ìœ¼ë¡œ ìš©ëŸ‰ í™•ì¥**ì´ ë˜ë¯€ë¡œ ë”°ë¡œ ìŠ¤í† ë¦¬ì§€ë¥¼ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ë‹¤.

### ğŸ“Œ 3. ì •ì  ë¦¬ì†ŒìŠ¤ì— ìµœì í™”

íŒŒì¼ ì—…ë¡œë“œ, ë‹¤ìš´ë¡œë“œ, URL ì ‘ê·¼(í¼ë¸”ë¦­/í”„ë¼ì´ë¹—) ê¸°ëŠ¥ì´ ì˜ ì œê³µë˜ì–´ ì‚¬ìš©ìì—ê²Œ **ì´ë¯¸ì§€ ë·°ë‚˜ ë‹¤ìš´ë¡œë“œ ë§í¬ë¥¼ ì§ì ‘ ì œê³µ**í•  ìˆ˜ ìˆë‹¤.

### ğŸ“Œ 4. ë¹„ìš© íš¨ìœ¨ì 

íŒŒì¼ë‹¹ ê³¼ê¸ˆì´ ì•„ë‹ˆë¼ ì €ì¥ ìš©ëŸ‰ê³¼ ì „ì†¡ëŸ‰ ê¸°ë°˜ìœ¼ë¡œ ê³¼ê¸ˆë˜ê¸° ë•Œë¬¸ì— **í•„ìš”í•œ ë§Œí¼ë§Œ ë¹„ìš© ì§€ë¶ˆ**ì´ ê°€ëŠ¥í•˜ë‹¤.

---

## âœ… S3 ì£¼ìš” ê°œë… ì •ë¦¬

| ìš©ì–´               | ì„¤ëª…                                                |
| ---------------- | ------------------------------------------------- |
| **ë²„í‚·(Bucket)**   | S3ì—ì„œ íŒŒì¼ì„ ì €ì¥í•˜ëŠ” **ìµœìƒìœ„ ë””ë ‰í† ë¦¬** ê°œë…. ì§€ì—­(Region) ë‹¨ìœ„ë¡œ ìƒì„±ë¨ |
| **ì˜¤ë¸Œì íŠ¸/ê°ì²´(Object)** | ì €ì¥ë˜ëŠ” ê°ê°ì˜ íŒŒì¼ ë‹¨ìœ„ (íŒŒì¼ + ë©”íƒ€ë°ì´í„°)                       |
| **í‚¤(Key)**       | íŒŒì¼ ê²½ë¡œ + ì´ë¦„ (ex: `images/user/123/profile.jpg`)    |
| **í¼ë¸”ë¦­ URL**      | ì ‘ê·¼ ê¶Œí•œì´ ì„¤ì •ëœ ì˜¤ë¸Œì íŠ¸ëŠ” HTTPë¥¼ í†µí•´ ë°”ë¡œ ì ‘ê·¼ ê°€ëŠ¥                |

---

## âœ… Spring Bootì—ì„œ S3 ì—°ë™ ë°©ë²•

### 1. ì˜ì¡´ì„± ì¶”ê°€ (Gradle)

```
implementation 'software.amazon.awssdk:s3'
implementation 'software.amazon.awssdk:auth'
```

### 2. application.yml ì„¤ì •

```yml
cloud:
  aws:
    credentials:
      access-key: ${AWS_ACCESS_KEY}
      secret-key: ${AWS_SECRET_KEY}
    region:
      static: ap-northeast-2
    s3:
      bucket: your-bucket-name
```

### 3. S3 ì„¤ì • í´ë˜ìŠ¤

```java
@Configuration
@RequiredArgsConstructor
public class S3Config {

    @Value("${cloud.aws.credentials.access-key}")
    private String accessKey;

    @Value("${cloud.aws.credentials.secret-key}")
    private String secretKey;

    @Value("${cloud.aws.region.static}")
    private String region;

    @Bean
    public S3Client s3Client() {
        AwsBasicCredentials credentials = AwsBasicCredentials.create(accessKey, secretKey);
        return S3Client.builder()
                .region(Region.of(region))
                .credentialsProvider(StaticCredentialsProvider.create(credentials))
                .build();
    }
}
```

### 4. ì—…ë¡œë“œ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤

```java
@Service
@RequiredArgsConstructor
public class S3Uploader {

    private final S3Client s3Client;

    @Value("${cloud.aws.s3.bucket}")
    private String bucket;

    public String upload(MultipartFile file, String dirName) throws IOException {
        String fileName = dirName + "/" + UUID.randomUUID() + "_" + file.getOriginalFilename();

        PutObjectRequest putObjectRequest = PutObjectRequest.builder()
            .bucket(bucket)
            .key(fileName)
            .acl("public-read") // ê³µê°œ ì½ê¸° ê¶Œí•œ ì„¤ì •
            .contentType(file.getContentType())
            .build();

        s3Client.putObject(putObjectRequest, RequestBody.fromBytes(file.getBytes()));

        return "https://" + bucket + ".s3.amazonaws.com/" + fileName;
    }
}
```

### 5. ì‚¬ìš© ì˜ˆì‹œ

```java
@PostMapping("/upload")
public ResponseEntity<String> uploadImage(@RequestParam MultipartFile file) throws IOException {
    String imageUrl = s3Uploader.upload(file, "images");
    return ResponseEntity.ok(imageUrl);
}
```